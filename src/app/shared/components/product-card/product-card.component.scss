:host { display:block; height:100%; }

/* — Carte — */
.product-card{
  position: relative;
  overflow: visible;
  display:flex; flex-direction:column; width:100%; max-width:100%; height:100%;
  border-radius:18px; cursor:pointer;
  transition: transform .25s cubic-bezier(.4,0,.2,1), filter .25s;
}
.product-card:hover { transform: translateY(-2px); filter: drop-shadow(0 12px 28px rgba(2,8,23,.12)); }

/* — Image : ratio homogène + backfill flouté — */
.product-image{
  --img-url: none;
  --img-dominant: #f1f5f9;
  position:relative;
  z-index: 0;               /* ← image SOUS le panneau info */
  aspect-ratio: 4 / 3;
  border-radius:18px; overflow:hidden;
  background: var(--img-dominant);
  box-shadow:0 10px 24px rgba(15,23,42,.10);
}
.product-image::before{
  content:''; position:absolute; inset:0; z-index:0;
  background-image: var(--img-url);
  background-size: cover; background-position:center;
  filter: blur(14px) saturate(1.15) brightness(1.02);
  transform: scale(1.08);
}
.product-image img{
  position:relative; z-index:1;
  width:100%; height:100%; display:block;
  object-fit: contain;           /* valeur par défaut, surchargée inline si besoin */
  object-position:center;
  transition: transform .45s ease;
}
.product-card:hover .product-image img{ transform: scale(1.02); }

/* — Bouton favori + badges — */
.fav-btn{
  position:absolute; top:.75rem; right:.75rem; z-index:5; /* au-dessus de tout */
  width:40px; height:40px; border:0; border-radius:9999px;
  background: rgba(255,255,255,.95);
  display:inline-flex; align-items:center; justify-content:center;
  box-shadow:0 6px 16px rgba(0,0,0,.18);
  transition: transform .15s, background .2s, box-shadow .2s;
}
.fav-btn:hover{ transform: scale(1.08); background:#fff; box-shadow:0 12px 28px rgba(0,0,0,.25); }
.fav-btn i{ font-size:1.05rem; color:#334155; }
.fav-btn i.text-red-500{ color:#ef4444 !important; }

.product-badge{
  position:absolute; top:.85rem; left:.85rem; z-index:4;
  padding:.25rem .65rem; border-radius:20px; font-size:.75rem; font-weight:800; color:#fff;
}
.product-badge.new{ background: linear-gradient(135deg,#10b981,#059669); }

.discount-badge{
  position:absolute; left:.85rem; top:.85rem; z-index:4;
  padding:.25rem .6rem; border-radius:9999px; font-size:.78rem; font-weight:900; color:#fff;
  background: linear-gradient(135deg,#ef4444,#dc2626);
  box-shadow: 0 6px 16px rgba(0,0,0,.18);
}
.discount-badge + .product-badge.new{ top: calc(.85rem + 1.9rem); }

/* — Panneau info : version “AVANT” (sous l’image, sans artiste) — */
:root { --info-h: 85px; }
@media (max-width: 1024px){ :root { --info-h: 82px; } }
@media (max-width: 640px){ :root { --info-h: 78px; } }

.product-info{
  position:relative;
  z-index: 2;                /* ← panneau AU-DESSUS de l'image */
  margin: 0 10px;
  padding: .55rem .85rem .6rem;
  gap: .2rem;
  background: rgba(255,255,255,.2);
  backdrop-filter: saturate(1.2) blur(6px);
  -webkit-backdrop-filter: saturate(1.2) blur(6px);
  border: 1px solid rgba(255,255,255,.2);

  border-radius:14px;
  box-shadow:0 12px 24px rgba(15,23,42,.10);

  transform: translateY(-16px);
  will-change: transform;
  transition: transform .25s, box-shadow .25s, border-color .25s, background .25s;
  overflow:hidden;

    min-height: 64px;        /* ✅ hauteur minimale */
  height: auto;            /* ✅ grandit si besoin */
  display:flex; flex-direction:column; justify-content:center;
  gap: .35rem;   
}
.product-info::before{
  content:''; position:absolute; inset:0; background:#fff; opacity:.2; pointer-events:none;
  transition: opacity .25s ease;
}
.product-card:hover .product-info{
  transform: translateY(-20px);
  background: rgba(255,255,255,.95);
  border-color: rgba(255,255,255,.70);
  box-shadow:0 18px 30px rgba(15,23,42,.14);
}
.product-card:hover .product-info::before{ opacity:.25; }

/* — Ligne du haut : prix à droite — */
.info-top{
  display:flex; align-items:baseline; justify-content:space-between; gap:.75rem;
}
.price-right{ display:inline-flex; align-items:baseline; gap:.3rem; margin-left:auto; text-align:right; }
.price-current{
  font-size:1.15rem; font-weight:900; letter-spacing:.2px;
  background: linear-gradient(135deg,#667eea 0%, #764ba2 100%);
  -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent;
}
.price-original{ font-size:.95rem; color:#94a3b8; text-decoration:line-through; }

/* — Titre sur 2 lignes — */
.product-title{
  margin:.1rem 0 0;
  font-size:1.05rem; font-weight:800; color:#0f172a; line-height:1.28;
  display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden;
}

/* — Focus — */
.product-card:focus-visible{ outline:none; filter: drop-shadow(0 0 0 rgba(0,0,0,0)); }
.product-card:focus-visible .product-image{
  box-shadow:0 0 0 3px rgba(59,130,246,.35), 0 12px 26px rgba(15,23,42,.12);
}
.product-card:focus-visible .product-info{
  box-shadow:0 0 0 3px rgba(59,130,246,.18), 0 18px 30px rgba(15,23,42,.14);
}

/* — Skeleton & carrousel — */
.product-card.skeleton{
  height:360px; border-radius:18px;
  background:linear-gradient(90deg,#eee 25%,#f5f5f5 37%,#eee 63%);
  background-size:400% 100%; animation:shimmer 1.2s infinite linear;
}
@keyframes shimmer{ 0%{background-position:100% 0} 100%{background-position:0 0} }

.carousel-track .product-card{ min-width:360px; max-width:420px; }
@media (max-width:768px){ .carousel-track .product-card{ min-width:300px; max-width:300px; } }
@media (max-width:480px){ .carousel-track .product-card{ min-width:260px; max-width:260px; } }
